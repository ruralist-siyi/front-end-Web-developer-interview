#### javascript的内存空间与垃圾回收机制

###### 1. javascript中的数据都需要内存空间，内存空间又被分为两种，栈内存(stack)与堆内存(heap)。

1. 栈数据结构（stack）：栈是一种遵从后进先出(LIFO)原则的有序集合。新添加的或是待删除的元素都保存在栈的末尾。我们称作栈顶，而另一端我们称作栈底。javascript中的基础数据类型一般都有固定的大小，保存在栈内存中，系统自动分配其存储空间，因此基础数据类型都是按值访问。
2. 堆数据结构（heap）: 堆数据结构是一种树状结构。JS的引用数据类型，比如数组Array，它们值的大小是不固定的。引用数据类型的值是保存在堆内存中的对象。JavaScript不允许直接访问堆内存中的位置，因此我们不能直接操作对象的堆内存空间。

###### 2. 垃圾回收机制

1. 变量的生命周期
   1. 全局变量的生存周期是永久的，除非我们主动销毁。（所以不应该有太多全局变量）
   2. 局部变量只在函数的执行过程中存在，而在这个过程中会为局部变量在栈或堆上分配相应的空间，以存储它们的值，然后再函数中使用这些变量，直至函数结束（闭包中由于内部函数的原因，外部函数并不能算是结束）
2. 回收方法
   1. 标记清除：这是JavaScript最常见的垃圾回收方式，当变量进入执行环境的时候，比如函数中声明一个变量，垃圾回收器将其标记为“进入环境”，当变量离开环境的时候（函数执行结束）将其标记为“离开环境”。
   2. 引用计数：当对象被引用次数为0时，就被回收。潜在的一个问题是：循环引用时，两个对象都至少被引用了一次，将不能自动被回收。所以导致，我们常讲的内存泄露。

##### 参考文档

1. [内存空间详解](https://yangbo5207.github.io/wutongluo/ji-chu-jin-jie-xi-lie/yi-3001-nei-cun-kong-jian-xiang-jie.html)